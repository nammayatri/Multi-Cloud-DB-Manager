# ============================================
# Dual DB Manager - Required Pod Environment
# ============================================
# Copy this file and fill in actual values.
# All variables listed here must be set in the
# Kubernetes deployment/secret for the pod to
# function correctly.
# ============================================

# --- Application ---
NODE_ENV=production
PORT=3000

# --- Session ---
SESSION_SECRET=           # REQUIRED: openssl rand -hex 32
SESSION_TTL_SECONDS=43200 # 12 hours

# --- Redis (Session + Execution State) ---
REDIS_HOST=               # REQUIRED: e.g. redis-cluster.cache.amazonaws.com
REDIS_PORT=6379
REDIS_CLUSTER_MODE=true   # true for ElastiCache cluster mode
REDIS_KEEPALIVE_MS=60000  # TCP keepalive interval (1 min)
REDIS_EXECUTION_TTL_SECONDS=300 # Async query state TTL (5 min)

# --- Database Config (base64 JSON, preferred) ---
DATABASE_CONFIGS=         # REQUIRED: base64-encoded JSON with all DB configs
REDIS_CONFIGS=            # REQUIRED: base64-encoded JSON with Redis Manager configs

# --- Query Execution ---
MAX_QUERY_TIMEOUT_MS=300000   # 5 min
STATEMENT_TIMEOUT_MS=300000   # 5 min

# --- Migrations ---
RUN_MIGRATIONS=false      # Set true only on first deploy

# --- CORS ---
FRONTEND_URL=             # REQUIRED: e.g. https://db-manager.sso.integ.internal.svc.movingtech.net
BACKEND_URL=              # REQUIRED: same as FRONTEND_URL for Pomerium setup
